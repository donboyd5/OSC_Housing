# Summarizing Three Major Measures of Housing Insecurity in New York's Regions

The table below summarizes by region three major measures of housing insecurity that are available on a comparable basis: cost burden, crowding, and the extent to which housing lacks complete plumbing or kitchen facilities. The table shows the percentage of households in the region that are faced with a given form of housing insecurity, as well as the region's rank within the state (with a rank of 1 being the worst).

Cost burden is the most prevalent form of housing insecurity in every region. Statewide 36 percent of households are cost burdened, 5.1 percent face crowded conditions, and 0.9 percent lack complete plumbing or kitchen facilities. New York City ranks worst overall on cost burden and crowding measures.

<!-- ![](images/image-1480931507.png) -->

```{r}
#| label: constants
#| include: false

```

```{r}
#| label: includes
#| include: false

source(here::here("r", "libraries.r"))
source(here::here("r", "functions.r"))
source(here::here("r", "constants.r"))

```

```{r}
#| label: get-data
#| include: false

# get cost, crowding, and plumbkitch regional data

cost <- readRDS(here::here("report", "results", "cb_tabdata_rgn.rds"))
crowd <- readRDS(here::here("report", "results", "crowd_tabdata_rgn.rds")) 
plumbkitch <- readRDS(here::here("report", "results", "plumbkitch_tabdata_rgn.rds")) 

stack <- bind_rows(cost |> mutate(measure="cost"),
                   crowd |> mutate(measure="crowd"),
                   plumbkitch |> mutate(measure="plumbkitch")) |> 
  select(measure, shortname, contains("_pct"), contains("rank")) |> # 
  arrange(shortname, measure)

```


```{r}
#| label: region-crosscutting
#| include: true
#| echo: false

tabdata <- stack |> 
  select(measure, shortname, alltenure_pct, alltenurerank) |> 
  pivot_wider(names_from = measure, values_from = c(alltenure_pct, alltenurerank))

saveRDS(tabdata, here::here("report", "results", "crosscutting_tabdata_rgn.rds")) # for appendix

tab <- tabdata |> 
  gt() |> 
  sub_missing(columns = everything()) |>
  tab_header(
    title = "Housing insecurity measures: cost burden, crowding, and lack of complete plumbing or kitchen facilities",
    subtitle="Universe is all occupied housing units (owner plus renter)"
    ) |>
  cols_label(shortname="Region",
             alltenure_pct_cost="Cost burden",
             alltenure_pct_crowd="Crowding",
             alltenure_pct_plumbkitch=html("Lacks complete plumbing or kitchen facilities"),	
             alltenurerank_cost="Cost burden",
             alltenurerank_crowd="Crowding",
             alltenurerank_plumbkitch=html("Lacks complete plumbing or kitchen facilities")) |> 
  tab_spanner(columns = contains("_pct"),
                    label=html("Percent of households with this problem")) |> 
  tab_spanner(columns = contains("rank"),
                    label=html("Rank among regions (1=Most prevalent)")) |> 
  fmt_percent(columns=contains("_pct"), decimals=1)|> 
  fmt_number(columns=contains("rank"),
             decimals=0) |>
  tab_source_note(source_note = "Source: HUD 5-year CHAS ending 2019")
# tab  

# tabfile <-  path(oscdir, "cost_states.png")
# gtsave(tab, tabfile, zoom=2, expand=20)

# vwidth = 992, vheight = 744,
tabfile <- tab_save("crosscutting_regions", tabdata, tab,
                    zoom=1, expand=20, vwidth=1200, vheight=744)

# {{< include ../../_gt_snippet.qmd >}}


```

{{< include ../_gt_snippet.qmd >}}
